diff --git a/drivers/tty/vt/vt.c b/drivers/tty/vt/vt.c
index c9ee8e9498d5..07d1aa8683d3 100644
--- a/drivers/tty/vt/vt.c
+++ b/drivers/tty/vt/vt.c
@@ -106,6 +106,7 @@
 #include <linux/ctype.h>
 #include <linux/bsearch.h>
 #include <linux/gcd.h>
+#include <linux/kcov.h>
 
 #define MAX_NR_CON_DRIVER 16
 
@@ -166,6 +167,7 @@ static void set_palette(struct vc_data *vc);
 #define vt_get_kmsg_redirect() vt_kmsg_redirect(-1)
 
 static int printable;		/* Is console ready for printing? */
+u64 kcov_handle = 0;
 int default_utf8 = true;
 module_param(default_utf8, int, S_IRUGO | S_IWUSR);
 int global_cursor_default = -1;
@@ -311,6 +313,7 @@ static inline void scrolldelta(int lines)
 	/* scrolldelta needs some kind of consistency lock, but the BKL was
 	   and still is not protecting versus the scheduled back end */
 	scrollback_delta += lines;
+	kcov_handle = current->kcov_handle;	
 	schedule_console_callback();
 }
 
@@ -2848,6 +2851,7 @@ static int do_con_write(struct tty_struct *tty, const unsigned char *buf, int co
  */
 static void console_callback(struct work_struct *ignored)
 {
+	kcov_remote_start(kcov_handle);
 	console_lock();
 
 	if (want_console >= 0) {
@@ -2879,6 +2883,7 @@ static void console_callback(struct work_struct *ignored)
 	notify_update(vc_cons[fg_console].d);
 
 	console_unlock();
+	kcov_remote_stop();
 }
 
 int set_console(int nr)
@@ -2900,6 +2905,7 @@ int set_console(int nr)
 	}
 
 	want_console = nr;
+	kcov_handle = current->kcov_handle;	
 	schedule_console_callback();
 
 	return 0;
